# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MongoDB –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è Sayahat

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –≤ MongoDB

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ MongoDB –∫ –ø—Ä–æ–µ–∫—Ç—É

1. **–û—Ç–∫—Ä–æ–π—Ç–µ MongoDB Compass** –∏ –Ω–∞–π–¥–∏—Ç–µ –≤–∞—à connection string
   - –ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ MongoDB Atlas –≤ –±—Ä–∞—É–∑–µ—Ä–µ: https://cloud.mongodb.com
   - –ù–∞–∂–º–∏—Ç–µ "Connect" –Ω–∞ –≤–∞—à–µ–º –∫–ª–∞—Å—Ç–µ—Ä–µ
   - –í—ã–±–µ—Ä–∏—Ç–µ "Drivers" ‚Üí "Node.js"
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Connection String

2. **–°–æ–∑–¥–∞–π—Ç–µ –∏–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env.local`** –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞

3. **–î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:**

```env
# OpenAI (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω)
OPENAI_API_KEY=–≤–∞—à_–∫–ª—é—á_openai

# MongoDB Connection String
# –ó–∞–º–µ–Ω–∏—Ç–µ username –∏ password –Ω–∞ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ
MONGODB_URI=mongodb+srv://username:password@shymkent.fqeqszf.mongodb.net/?retryWrites=true&w=majority
MONGODB_DB=sayahat

# NextAuth Secret - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É
# –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: openssl rand -base64 32
# –ò–ª–∏ –ª—é–±–æ–π —Å–ª—É—á–∞–π–Ω—ã–π –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤
NEXTAUTH_SECRET=–≤–∞—à-—Å–ª—É—á–∞–π–Ω—ã–π-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
NEXTAUTH_URL=http://localhost:3000
```

### –®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è NEXTAUTH_SECRET

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:
```bash
# Windows PowerShell:
[Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 }))

# –ò–ª–∏ Linux/Mac:
openssl rand -base64 32

# –ò–ª–∏ –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π –¥–ª–∏–Ω–Ω—ã–π —Å–ª—É—á–∞–π–Ω—ã–π —Ç–µ–∫—Å—Ç (–º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞)
```

### –®–∞–≥ 3: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö MongoDB

–ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏:

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `users`
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö:
```json
{
  "_id": ObjectId("..."),
  "email": "user@example.com",
  "password": "$2a$10$...", // —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å
  "name": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "createdAt": ISODate("..."),
  "updatedAt": ISODate("...")
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `plans`
–•—Ä–∞–Ω–∏—Ç –ø–ª–∞–Ω—ã –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π (–ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é):
```json
{
  "_id": ObjectId("..."),
  "userId": "user_id_–∏–∑_—Å–µ—Å—Å–∏–∏",
  "title": "–ù–∞–∑–≤–∞–Ω–∏–µ –ø–ª–∞–Ω–∞",
  "date": "15 –¥–µ–∫ 2024",
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
  "locations": [...],
  "route": {...},
  "createdAt": ISODate("..."),
  "updatedAt": ISODate("...")
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `notes`
–•—Ä–∞–Ω–∏—Ç –∑–∞–º–µ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é):
```json
{
  "_id": ObjectId("..."),
  "userId": "user_id_–∏–∑_—Å–µ—Å—Å–∏–∏",
  "title": "–ó–∞–≥–æ–ª–æ–≤–æ–∫ –∑–∞–º–µ—Ç–∫–∏",
  "content": "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ",
  "type": "note" | "receipt" | "voucher",
  "createdAt": ISODate("..."),
  "updatedAt": ISODate("...")
}
```

#### –ö–æ–ª–ª–µ–∫—Ü–∏—è `places` (–µ—Å–ª–∏ –µ—Å—Ç—å)
–•—Ä–∞–Ω–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –º–µ—Å—Ç–∞—Ö/–ª–æ–∫–∞—Ü–∏—è—Ö:
```json
{
  "_id": ObjectId("..."),
  "name": "–ù–∞–∑–≤–∞–Ω–∏–µ –º–µ—Å—Ç–∞",
  "city": "–ì–æ—Ä–æ–¥",
  "lat": 43.2,
  "lng": 76.8,
  "tags": ["–¥–æ—Å—Ç–æ–ø—Ä–∏–º–µ—á–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å", "–º—É–∑–µ–π"],
  "description": "–û–ø–∏—Å–∞–Ω–∏–µ"
}
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä (Ctrl+C) –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–Ω–æ–≤–∞:
npm run dev
```

## üîê –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/auth/signup`
   - –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É (–∏–º—è, email, –ø–∞—Ä–æ–ª—å)
   - –ü–∞—Ä–æ–ª—å —Ö–µ—à–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é bcrypt
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—é `users`

2. **–í—Ö–æ–¥:**
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/auth/signin`
   - –í–≤–æ–¥–∏—Ç email –∏ –ø–∞—Ä–æ–ª—å
   - –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ MongoDB
   - –°–æ–∑–¥–∞–µ—Ç—Å—è JWT —Å–µ—Å—Å–∏—è

3. **–†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏:**
   - –í—Å–µ –ø–ª–∞–Ω—ã –∏ –∑–∞–º–µ—Ç–∫–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ `userId`
   - –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ
   - –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/—É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:3000/auth/signup
   - –°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç

2. **–í–æ–π–¥–∏—Ç–µ:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ http://localhost:3000/auth/signin
   - –í–æ–π–¥–∏—Ç–µ –≤ —Å–æ–∑–¥–∞–Ω–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ:**
   - –°–æ–∑–¥–∞–π—Ç–µ –ø–ª–∞–Ω –∏–ª–∏ –∑–∞–º–µ—Ç–∫—É
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ MongoDB Compass - –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –∫–æ–ª–ª–µ–∫—Ü–∏—è—Ö `plans` –∏–ª–∏ `notes`
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –µ—Å—Ç—å –ø–æ–ª–µ `userId`

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Missing MongoDB credentials"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª `.env.local` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `MONGODB_URI` –∏ `MONGODB_DB` –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è `.env.local`

### –û—à–∏–±–∫–∞ "NEXTAUTH_SECRET is not defined"
- –î–æ–±–∞–≤—å—Ç–µ `NEXTAUTH_SECRET` –≤ `.env.local`
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º—É–º 32 —Å–∏–º–≤–æ–ª–∞
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

### –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å Connection String
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ username –∏ password –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network Access –≤ MongoDB Atlas (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω –¥–æ—Å—Ç—É–ø)

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–Ω –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `users`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –ü–∞—Ä–æ–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ (bcrypt)
   - –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env.local` –≤ Git (–æ–Ω —É–∂–µ –≤ `.gitignore`)
   - `NEXTAUTH_SECRET` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏ —Å–µ–∫—Ä–µ—Ç–Ω—ã–º

2. **–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
   - –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –ø–ª–∞–Ω—ã –∏ –∑–∞–º–µ—Ç–∫–∏
   - –ü—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç—å –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –î–∞–Ω–Ω—ã–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ `userId`

3. **MongoDB:**
   - –ö–æ–ª–ª–µ–∫—Ü–∏–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏
   - –ò–Ω–¥–µ–∫—Å—ã –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–∑–∂–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –∏–Ω–¥–µ–∫—Å –Ω–∞ `userId` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

