# üîç –ü–æ–∏—Å–∫ –º–µ—Å—Ç –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ towns

## –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ:

1. **API endpoint `/api/places/search`** - –ø–æ–∏—Å–∫ –º–µ—Å—Ç –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `towns`
2. **–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `getNearbyPlacesFromDb`** - —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ –∏—â–µ—Ç –º–µ—Å—Ç–∞ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `towns`
3. **–û–±–Ω–æ–≤–ª–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `SearchTab`** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π API –¥–ª—è –ø–æ–∏—Å–∫–∞

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `towns`:

```json
{
  "_id": ObjectId("691c9b692f57d6e91156d18a"),
  "name": "–®—ã–º–∫–µ–Ω—Ç",
  "places": [
    {
      "id": "way/184750805",
      "name": "31 –∞",
      "lat": 43.2009807,
      "lon": 76.8722765,
      "category": ["shopping"],
      "tags": {
        "addr:housenumber": "31–ê",
        "addr:place": "–û—Ä–±–∏—Ç–∞ 3-–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω",
        "name": "31 –∞",
        "shop": "supermarket",
        "opening_hours": "Mo-Su 09:00-21:00"
      },
      "price_kzt": 9251,
      "stars": null
    }
  ]
}
```

## API Endpoint: `/api/places/search`

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:

- `q` (string) - –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–ø–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, —Ç–µ–≥–∞–º, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)
- `cityId` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - ID –≥–æ—Ä–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `691c9b692f57d6e91156d18a` –¥–ª—è –®—ã–º–∫–µ–Ω—Ç–∞)
- `lat` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —à–∏—Ä–æ—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
- `lng` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –¥–æ–ª–≥–æ—Ç–∞ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
- `limit` (number, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 50)
- `category` (string, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

```javascript
// –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é
GET /api/places/search?q=—Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç

// –ü–æ–∏—Å–∫ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ (—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±—É–¥–µ—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–æ)
GET /api/places/search?q=–º–∞–≥–∞–∑–∏–Ω&lat=43.2&lng=76.8

// –ü–æ–∏—Å–∫ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –≥–æ—Ä–æ–¥–µ
GET /api/places/search?q=—Ä–µ—Å—Ç–æ—Ä–∞–Ω&cityId=691c9b692f57d6e91156d18a

// –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
GET /api/places/search?category=shopping
```

### –û—Ç–≤–µ—Ç:

```json
{
  "count": 10,
  "total": 15,
  "places": [
    {
      "id": "way/184750805",
      "name": "31 –∞",
      "lat": 43.2009807,
      "lng": 76.8722765,
      "city": "–®—ã–º–∫–µ–Ω—Ç",
      "cityId": "691c9b692f57d6e91156d18a",
      "category": ["shopping"],
      "tags": {
        "shop": "supermarket",
        "addr:place": "–û—Ä–±–∏—Ç–∞ 3-–π –º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω"
      },
      "distanceKm": 2.5,
      "price_kzt": 9251
    }
  ]
}
```

## –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–∏—Å–∫:

1. **–ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é** - –∏—â–µ—Ç –≤ –ø–æ–ª–µ `name`
2. **–ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** - –∏—â–µ—Ç –≤ –º–∞—Å—Å–∏–≤–µ `category`
3. **–ü–æ —Ç–µ–≥–∞–º** - –∏—â–µ—Ç –≤–æ –≤—Å–µ—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –æ–±—ä–µ–∫—Ç–∞ `tags`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ AI-—á–∞—Ç–µ:

–§—É–Ω–∫—Ü–∏—è `getNearbyPlacesFromDb` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Å—Ç–∞ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `towns` –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è AI. –ú–µ—Å—Ç–∞ —Å–æ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã).

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ UI:

–ö–æ–º–ø–æ–Ω–µ–Ω—Ç `SearchTab` –≤ AI-–≥–∏–¥–µ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–π API –¥–ª—è –ø–æ–∏—Å–∫–∞. –ü–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 300ms (debounce) –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤.

