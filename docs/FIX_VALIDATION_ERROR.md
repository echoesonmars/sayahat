# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ MongoDB

## –ü—Ä–æ–±–ª–µ–º–∞

–û—à–∏–±–∫–∞: `Document failed validation` –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `users` –≤ MongoDB —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è —Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è –∏–ª–∏ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö.

## –†–µ—à–µ–Ω–∏–µ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ö–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ MongoDB Compass

1. –û—Ç–∫—Ä–æ–π—Ç–µ MongoDB Compass
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö `sayahat`
3. –í—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é `users`
4. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É "Validation" –∏–ª–∏ "Schema"
5. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫–∏–µ –ø–æ–ª—è —Ç—Ä–µ–±—É—é—Ç—Å—è

## –†–µ—à–µ–Ω–∏–µ 2: –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é

–ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–µ –Ω—É–∂–Ω–∞, –º–æ–∂–Ω–æ –µ—ë –æ—Ç–∫–ª—é—á–∏—Ç—å:

1. –í MongoDB Compass –≤—ã–±–µ—Ä–∏—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é `users`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "Validation" –∏–ª–∏ "Schema"
3. –£–¥–∞–ª–∏—Ç–µ –∏–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ —Å—Ö–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏

## –†–µ—à–µ–Ω–∏–µ 3: –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ö–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω—É–∂–Ω–∞, –æ–±–Ω–æ–≤–∏—Ç–µ –µ—ë, —á—Ç–æ–±—ã –æ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –Ω–∞—à–∏–º –¥–∞–Ω–Ω—ã–º:

```json
{
  "$jsonSchema": {
    "bsonType": "object",
    "required": ["email", "password", "name"],
    "properties": {
      "email": {
        "bsonType": "string",
        "description": "Email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
      },
      "password": {
        "bsonType": "string",
        "description": "–•–µ—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä–æ–ª—å (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
      },
      "name": {
        "bsonType": "string",
        "description": "–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)"
      },
      "createdAt": {
        "bsonType": "date",
        "description": "–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è"
      },
      "updatedAt": {
        "bsonType": "date",
        "description": "–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è"
      }
    }
  }
}
```

## –†–µ—à–µ–Ω–∏–µ 4: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ MongoDB Shell

–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ—Å—Ç—É–ø –∫ MongoDB Shell, –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```javascript
use sayahat
db.runCommand({
  collMod: "users",
  validator: {
    $jsonSchema: {
      bsonType: "object",
      required: ["email", "password", "name"],
      properties: {
        email: { bsonType: "string" },
        password: { bsonType: "string" },
        name: { bsonType: "string" },
        createdAt: { bsonType: "date" },
        updatedAt: { bsonType: "date" }
      }
    }
  },
  validationLevel: "moderate",
  validationAction: "error"
})
```

–ò–ª–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é:

```javascript
use sayahat
db.runCommand({
  collMod: "users",
  validator: {}
})
```

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

1. –î–æ–±–∞–≤–ª–µ–Ω `bypassDocumentValidation: true` –ø—Ä–∏ –≤—Å—Ç–∞–≤–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≤—Ä–µ–º–µ–Ω–Ω–æ –æ–±—Ö–æ–¥–∏—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é)
2. –£–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
3. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –≤—Å—Ç–∞–≤–∫–æ–π

## –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–Ω–æ–≤–∞. –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ö–µ–º—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤ MongoDB Compass.

